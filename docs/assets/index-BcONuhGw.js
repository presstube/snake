(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))P(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const v of s.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&P(v)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function P(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();window.onload=function(){const i=document.getElementById("gridCanvas"),r=i.getContext("2d"),t=10,P="#555",n="#222",s="blue",v="green",k="red";let G=10,L=1e3/G,A=.07,c=0,f=0,M=[{x:c,y:f}],h=1,u=0,w=x(0,i.width/t),b=x(0,i.height/t);const y=i.width/t,g=i.height/t;let p=S(y,g);function R(){p=S(y,g);for(let e=0;e<y;e++)for(let o=0;o<g;o++)(Math.abs(c-e)>10||Math.abs(f-o)>10)&&(Math.abs(w-e)>10||Math.abs(b-o)>10)&&(p[e][o]=Math.random()<A?1:0)}R();const l=window.devicePixelRatio||1;i.width=800*l,i.height=800*l,r.scale(l,l),i.style.width="800px",i.style.height="800px";function S(e,o){const d=[];for(let a=0;a<e;a++){d[a]=[];for(let m=0;m<o;m++)d[a][m]=0}return d}function T(){r.fillStyle=n,r.fillRect(0,0,i.width/l,i.height/l),r.strokeStyle=P,r.lineWidth=1/l;for(let e=0;e<=i.width/l;e+=t)r.beginPath(),r.moveTo(e,0),r.lineTo(e,i.height/l),r.stroke();for(let e=0;e<=i.height/l;e+=t)r.beginPath(),r.moveTo(0,e),r.lineTo(i.width/l,e),r.stroke();r.fillStyle=s,M.forEach(e=>{r.fillRect(e.x*t,e.y*t,t,t)}),r.fillStyle=v,r.fillRect(w*t,b*t,t,t),r.fillStyle=k;for(let e=0;e<y;e++)for(let o=0;o<g;o++)p[e][o]===1&&r.fillRect(e*t,o*t,t,t)}function F(){c+=h,f+=u,c<0&&(c=i.width/l/t-1),f<0&&(f=i.height/l/t-1),c>=i.width/l/t&&(c=0),f>=i.height/l/t&&(f=0),c===w&&f===b?(M.push({x:c,y:f}),w=x(0,i.width/l/t),b=x(0,i.height/l/t),console.log(`Food respawned at (${w}, ${b})`),A=Math.min(A+.02,1),G+=1,L=1e3/G,R()):(M.push({x:c,y:f}),M.shift()),p[c][f]===1&&I()}function x(e,o){return Math.floor(Math.random()*(o-e))+e}function N(){const e=S(y,g);for(let o=0;o<y;o++)for(let d=0;d<g;d++){const a=q(p,o,d);p[o][d]===1?a<2||a>3?e[o][d]=0:e[o][d]=1:a===3&&(e[o][d]=1)}p=e}function q(e,o,d){let a=0;for(let m=-1;m<=1;m++)for(let C=-1;C<=1;C++){if(m===0&&C===0)continue;const X=(o+m+y)%y,Y=(d+C+g)%g;a+=e[X][Y]}return a}function I(){c=0,f=0,M=[{x:c,y:f}],h=1,u=0,w=x(0,i.width/t),b=x(0,i.height/t),A=.07,G=10,L=1e3/G,R(),console.log("Game reset")}window.addEventListener("keydown",function(e){switch(e.key){case"ArrowUp":u===0&&(h=0,u=-1);break;case"ArrowDown":u===0&&(h=0,u=1);break;case"ArrowLeft":h===0&&(h=-1,u=0);break;case"ArrowRight":h===0&&(h=1,u=0);break}});let E=0;function O(e){e-E>=L&&(E=e,F(),N(),T()),requestAnimationFrame(O)}T(),requestAnimationFrame(O)};
